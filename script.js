const fullResponsibilities = {
  "1A": {
    "1AC": {
      "core": "Present the affirmative case: resolution, harms, inherency, solvency, and plan.",
      "style": "Use persuasive tone, emphasize clarity, and signpost structure (e.g., 'First, the Harms...').",
      "reminders": "Avoid reading too quickly; practice a strong opening."
    },
    "CX (1AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1NC)": {
      "core": "Ask pointed questions to weaken opposing arguments.",
      "style": "Clarify gaps in logic; remain calm and controlled.",
      "reminders": "Don\u2019t waste time; avoid hostile tone."
    },
    "2AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (2AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1AR": {
      "core": "Refute 1NR and 2NC; crystallize aff case; collapse to core issues.",
      "style": "Be efficient; emphasize weighing and impact calculus.",
      "reminders": "Avoid re-explaining the 1AC; don\u2019t get lost in low-impact arguments."
    },
    "2NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    }
  },
  "2A": {
    "1AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1NC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AC": {
      "core": "Answer 1NC arguments; extend 1AC case; rebuild aff offense.",
      "style": "Sound confident; don't rush; collapse to strong aff positions.",
      "reminders": "Don\u2019t drop key 1NC arguments; clarify what you're winning."
    },
    "CX (2AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AR": {
      "core": "Deliver final aff speech; extend key issues; win the round.",
      "style": "Collapse to core themes; compare impacts clearly.",
      "reminders": "Don\u2019t make new arguments; stay focused on win conditions."
    }
  },
  "1N": {
    "1AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1AC)": {
      "core": "Ask pointed questions to weaken opposing arguments.",
      "style": "Clarify gaps in logic; remain calm and controlled.",
      "reminders": "Don\u2019t waste time; avoid hostile tone."
    },
    "1NC": {
      "core": "Introduce off-case (disads, CPs, topicality); refute 1AC on-case points.",
      "style": "Label and group arguments clearly. Prioritize important issues.",
      "reminders": "Don\u2019t forget to answer all 1AC points; avoid jargon overload."
    },
    "CX (1NC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (2AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NR": {
      "core": "Finish the negative block; cover arguments 2NC didn't.",
      "style": "Go fast but flow clearly; prep during 2AC and 2NC.",
      "reminders": "Don\u2019t drop new 2AC responses; coordinate with 2NC."
    },
    "1AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    }
  },
  "2N": {
    "1AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1AC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1NC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (1NC)": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2AC": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "CX (2AC)": {
      "core": "Ask pointed questions to weaken opposing arguments.",
      "style": "Clarify gaps in logic; remain calm and controlled.",
      "reminders": "Don\u2019t waste time; avoid hostile tone."
    },
    "2NC": {
      "core": "Split the block; extend off-case arguments; deepen strategic attacks.",
      "style": "Organize by argument; prep with 1NR; stay composed.",
      "reminders": "Avoid overlap with 1NR; be sure to extend impacts."
    },
    "1NR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "1AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    },
    "2NR": {
      "core": "Deliver final negative strategy; collapse to 1\u20132 winning arguments.",
      "style": "Frame the round clearly; use judge-friendly language.",
      "reminders": "Don\u2019t introduce new arguments; weigh impacts convincingly."
    },
    "2AR": {
      "core": "Flow carefully; track Uniqueness, Links, Internal Links, and Impacts.",
      "style": "Stay focused; prep extensions or responses.",
      "reminders": "Don\u2019t zone out; avoid messy or incomplete flows."
    }
  },
  "Judge ": {
    "1AC": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "CX (1AC)": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "1NC": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "CX (1NC)": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "2AC": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "CX (2AC)": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "2NC": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "1NR": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "1AR": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "2NR": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    },
    "2AR": {
      "core": "Placeholder for judge info",
      "style": "Placeholder for judge info",
      "reminders": "Placeholder for judge info"
    }
  }
};

function updateResponsibilities(speechLabel) {
  const listEl = document.getElementById('responsibilities-list');
  listEl.innerHTML = '';

  if (!userRole || !fullResponsibilities[userRole]) {
    listEl.innerHTML = '<li>No responsibilities data available.</li>';
    return;
  }

  const data = fullResponsibilities[userRole][speechLabel] || {
    core: `Be sure to flow and prepare responses to ${speechLabel}.`,
    style: '',
    reminders: ''
  };

  ['core', 'style', 'reminders'].forEach(key => {
    if (data[key]) {
      const li = document.createElement('li');
      li.textContent = `${key.charAt(0).toUpperCase() + key.slice(1)}: ${data[key]}`;
      listEl.appendChild(li);
    }
  });
}

document.getElementById('setup-confirm').addEventListener('click', () => {
  userRole = document.getElementById('role-select').value;
  userLevel = document.getElementById('level-select').value;

  speechTimes = timePresets[userLevel].speechTimes;
  prepTimeLeft = timePresets[userLevel].prepTime;

  document.getElementById('setup-modal').style.display = 'none';

  // Update button labels with correct time (e.g., 8m or 5m)
  document.querySelectorAll('.grid button').forEach(button => {
    const label = button.textContent.split(' ')[0];
    const newTime = Math.floor(speechTimes[label] / 60);
    if (!isNaN(newTime)) {
      button.textContent = `${label} (${newTime}m)`;
    }
  });

  updateSpeechDisplay();
  updatePrepDisplay();
});
